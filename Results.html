<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Results</title>
    
    <link rel="stylesheet" href="lib/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" href="lib/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="lib/bootstrap/dist/css/bootstrap-grid.css">
    <link rel="stylesheet" href="lib/bootstrap/dist/css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="lib/bootstrap/dist/css/bootstrap-reboot.css">
    <link rel="stylesheet" href="css/site.css">
    <link rel="stylesheet" href="css/mystyles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=ABeeZee">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Josefin+Sans">
    
    <script src="lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="lib/jquery/dist/jquery.min.js"></script>
    <script src="lib/bootstrap/dist/js/bootstrap.bundle.js"></script>
    <script src="lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/bootstrap/dist/js/bootstrap.js"></script>
    <script src="lib/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
    
<!--Smooth Scrolling Reference - https://github.com/cferdinandi/smooth-scroll!-->

<script src="https://cdn.jsdelivr.net/gh/cferdinandi/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
<script>var scroll = new SmoothScroll('a[href*="#"]');</script>
    
</head>


<!DOCTYPE html>
<html style="width: 100%;height: 100vh;">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Results Page.bdesign</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/styles.css">
</head>


<body style="width: 100%;height: 100vh;">
    <div style="width: 100%;height: 100vh;/*overflow: overlay;*/">
        <div class="row" style="width: 100%;height: 100vh;margin: 0;">
            <div id="results-col" class="col" style="height: 100vh;overflow: scroll;">
                <div class="row text-center d-xl-flex" style="padding: 3vh;">
                    <div class="col">
                        <h3 style="text-align: center;width: 100%;height: 100%;margin: 0;padding: 0;">Search Results</h3>
                    </div>
                </div>
                <div class="row">
                    <div class="col align-items-center align-content-center">
                        <div class="dropdown align-self-center" style="width: 100%;height: auto;"><button class="btn btn-dark dropdown-toggle" data-toggle="dropdown" aria-expanded="false" type="button" style="width: 100%;height: auto;">Sort By</button>
                            <div class="dropdown-menu text-black-50 align-items-center align-content-center"
                                role="menu" style="width: 100%;text-align: center;"><a class="dropdown-item" role="presentation" href="#">Name</a><a class="dropdown-item" role="presentation" href="#">Price: High to Low</a><a class="dropdown-item" role="presentation" href="#">Price: Low to High</a><a class="dropdown-item"
                                    role="presentation" href="#">Distance</a></div>
                        </div>
                    </div>
                </div>
              <!--  <div class="card" style="padding: 0px;margin-top: 1vh;margin-bottom: 1vh;">
                    <div class="card-body">
                        <h4 class="card-title" style="font-weight: bold;">Hospital Name</h4>
                        <h6 class="text-muted card-subtitle mb-2">Cost: $$$$$</h6>
                        <h6 class="text-muted card-subtitle mb-2" style="font-size: 16px;">Distance: 123 miles</h6>
                        <p class="card-text" style="font-size: 14px;">Address</p>
                    </div>
                </div> -->
            </div>
            <div class="col-xl-9" style="padding: 0;width: 100%;height: 100vh;"><iframe allowfullscreen="" frameborder="0" src="https://www.google.com/maps/embed/v1/place?key=AIzaSyBTxspkggtGV7JmBdKyIpDwP7iioSGofCE&amp;q=Paris%2C+France&amp;zoom=11" width="100%" height="100%" style="width: 100%;height: 100vh;"></iframe></div>
        </div>
    </div>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>


    <script>
        
        var queryString = window.location.search;
        
        var apiurl = "https://team10agile.azurewebsites.net/api/query?";
        
        var url =  apiurl.concat(queryString);
        
        

        function dynamicSort(property) {
            var sortOrder = 1;
            if (property[0] === "-") {
                sortOrder = -1;
                property = property.substr(1);
            }
            return function (a, b) {
                /* next line works with strings and numbers,
                 * and you may want to customize it to your needs
                 */
                var result = (a[property] < b[property]) ? -1 : (a[property] > b[property]) ? 1 : 0;
                return result * sortOrder;
            }
        }

        function toTitleCase(str) {
            return str.replace(
                /\w\S*/g,
                function (txt) {
                    return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
                }
            );
        }

        async function getHospDataByName() {
            const response = await fetch(url);
            const data = await response.json();
            console.log(data[0]);

            data.sort(dynamicSort("providerName"));
            console.log(data);

            var i = 0;

            for (i = 0; i < data.length; i++) {
                const name = data[i].providerName;
                var cost = data[i].totalCost;
                var streetname = data[i].providerStreetAddress;
                var city = data[i].providerCity;
                var state = data[i].providerState;
                var zip = data[i].providerZipCode;

                var newCard = document.createElement("div");
                newCard.className = "card";

                var newCardBody = document.createElement("div");
                newCardBody.className = "card-body";

                var newCardHead = document.createElement("h4");
                newCardHead.className = "card-title";

                var newCardCost = document.createElement("h6");
                newCardCost.className = "text-muted card-subtitle mb-2";

                var newCardDistance = document.createElement("h6");
                newCardDistance.className = "tetext-muted card-subtitle mb-2";

                var newCardAddress = document.createElement("p")
                newCardAddress.className = "card-text";

                var newCardZip = document.createElement("p")
                newCardZip.className = "card-text";

                newCardHead.textContent = toTitleCase(name);
                newCardCost.textContent = "Cost: $";
                newCardCost.textContent += cost;
                newCardDistance.textContent = "Distance: N/A";

                newCardAddress.textContent = toTitleCase(streetname);
                newCardAddress.textContent += ", ";
                newCardAddress.textContent += toTitleCase(city);
                newCardAddress.textContent += ", ";
                newCardAddress.textContent += state;

                newCardZip.textContent = "Zipcode: ";
                newCardZip.textContent += zip;


                var location = document.getElementById("results-col");

                location.appendChild(newCard);
                newCard.appendChild(newCardBody);
                newCardBody.appendChild(newCardHead);
                newCardBody.appendChild(newCardCost);
                newCardBody.appendChild(newCardDistance);
                newCardBody.appendChild(newCardAddress);
                newCardBody.appendChild(newCardZip);
            }

        }

        async function getHospDataByCost() {
            const response = await fetch(url);
            const data = await response.json();
            console.log(data[0]);

            data.sort(dynamicSort("totalCost"));

            var i = 0;

            for (i = 0; i < data.length; i++) {
                const name = data[i].providerName;
                var cost = data[i].totalCost;
                var streetname = data[i].providerStreetAddress;
                var city = data[i].providerCity;
                var state = data[i].providerState;
                var zip = data[i].providerZipCode;

                var newCard = document.createElement("div");
                newCard.className = "card";

                var newCardBody = document.createElement("div");
                newCardBody.className = "card-body";

                var newCardHead = document.createElement("h4");
                newCardHead.className = "card-title";

                var newCardCost = document.createElement("h6");
                newCardCost.className = "text-muted card-subtitle mb-2";

                var newCardDistance = document.createElement("h6");
                newCardDistance.className = "tetext-muted card-subtitle mb-2";

                var newCardAddress = document.createElement("p")
                newCardAddress.className = "card-text";

                var newCardZip = document.createElement("p")
                newCardZip.className = "card-text";

                newCardHead.textContent = toTitleCase(name);
                newCardCost.textContent = "Cost: $";
                newCardCost.textContent += cost;
                newCardDistance.textContent = "Distance: N/A";

                newCardAddress.textContent = toTitleCase(streetname);
                newCardAddress.textContent += ", ";
                newCardAddress.textContent += toTitleCase(city);
                newCardAddress.textContent += ", ";
                newCardAddress.textContent += state;

                newCardZip.textContent = "Zipcode: ";
                newCardZip.textContent += zip;


                var location = document.getElementById("results-col");

                location.appendChild(newCard);
                newCard.appendChild(newCardBody);
                newCardBody.appendChild(newCardHead);
                newCardBody.appendChild(newCardCost);
                newCardBody.appendChild(newCardDistance);
                newCardBody.appendChild(newCardAddress);
                newCardBody.appendChild(newCardZip);
            }

        }


        getHospDataByCost();</script>




</body>

</html>
